var y=Object.defineProperty,O=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var l=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var m=(t,e,n)=>e in t?y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_=(t,e)=>{for(var n in e||(e={}))x.call(e,n)&&m(t,n,e[n]);if(l)for(var n of l(e))D.call(e,n)&&m(t,n,e[n]);return t},R=(t,e)=>O(t,h(e));import{useEffect as A,useReducer as g,useRef as C}from"react";var I=t=>t+1;function M({init:t,reducer:e}){let n=new Map,u=new Map,i={_state:t,get state(){return this._state},set state(s){this._state=s;for(let[a,c]of n.entries()){if(!c)continue;let p=u.get(a);a(this._state)!=p&&c()}}};function S(){return i.state}async function o(s){let a=await e(s,S,o);i.state=a}function d(s){n.delete(s),u.delete(s)}function f(s){let a=C(s),[,c]=g(I,0),p=a.current(i.state);return n.set(a.current,c),u.set(a.current,p),A(()=>()=>d(a.current),[]),p}return[o,f,S]}var w="__REDUX_DEVTOOLS_EXTENSION__",r=(()=>{try{return window[w]||window.top[w]}catch{return}})(),E=0;function V({init:t,reducer:e,name:n,replacer:u,reviver:i}){return r==null||r.connect({name:n||`ProxyState ${E++}`,serialize:{replacer:u,reviver:i},features:{persist:!1,export:!0,import:"custom",jump:!1,skip:!1,reorder:!1,dispatch:!0,test:!0}}),r==null||r.send("__INIT__",t),{reducer:async(o,d,f)=>{let s=new Date().toISOString(),a=e(o,d,f),c=await a;return a instanceof Promise?r==null||r.send(R(_({},o),{__startTime:s,__endTime:new Date().toISOString()}),c):r==null||r.send(o,a),a},init:t}}export{V as addDevtools,M as createState};
