var O=Object.defineProperty,h=Object.defineProperties;var x=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var _=(t,e,a)=>e in t?O(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,R=(t,e)=>{for(var a in e||(e={}))D.call(e,a)&&_(t,a,e[a]);if(m)for(var a of m(e))A.call(e,a)&&_(t,a,e[a]);return t},w=(t,e)=>h(t,x(e));import{useEffect as g,useReducer as C,useRef as I}from"react";var E=t=>t+1;function M({init:t,reducer:e}){let a=new Map,i=new Map,u={_state:t,get state(){return this._state},set state(s){this._state=s;for(let[n,c]of a.entries()){if(!c)continue;let f=i.get(n),l=n(this._state);l!=f&&(i.set(n,l),c())}}};function p(){return u.state}async function o(s){let n=await e(s,p,o);u.state=n}function S(s){a.delete(s),i.delete(s)}function d(s){let n=I(s),[,c]=C(E,0),f=n.current(u.state);return a.set(n.current,c),g(()=>()=>S(n.current),[]),f}return[o,d,p]}var y="__REDUX_DEVTOOLS_EXTENSION__",r=(()=>{try{return window[y]||window.top[y]}catch{return}})(),T=0;function V({init:t,reducer:e,name:a,replacer:i,reviver:u}){return r==null||r.connect({name:a||`ProxyState ${T++}`,serialize:{replacer:i,reviver:u},features:{persist:!1,export:!0,import:"custom",jump:!1,skip:!1,reorder:!1,dispatch:!0,test:!0}}),r==null||r.send("__INIT__",t),{reducer:async(o,S,d)=>{let s=new Date().toISOString(),n=e(o,S,d),c=await n;return n instanceof Promise?r==null||r.send(w(R({},o),{__startTime:s,__endTime:new Date().toISOString()}),c):r==null||r.send(o,n),n},init:t}}export{V as addDevtools,M as createState};
