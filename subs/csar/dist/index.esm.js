var b=Object.defineProperty,A=Object.defineProperties;var C=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var h=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var O=(t,e,s)=>e in t?b(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,w=(t,e)=>{for(var s in e||(e={}))h.call(e,s)&&O(t,s,e[s]);if(_)for(var s of _(e))y.call(e,s)&&O(t,s,e[s]);return t},D=(t,e)=>A(t,C(e));var x=(t,e)=>{var s={};for(var n in t)h.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&_)for(var n of _(t))e.indexOf(n)<0&&y.call(t,n)&&(s[n]=t[n]);return s};var R=(t,e,s)=>new Promise((n,c)=>{var l=r=>{try{u(s.next(r))}catch(i){c(i)}},S=r=>{try{u(s.throw(r))}catch(i){c(i)}},u=r=>r.done?n(r.value):Promise.resolve(r.value).then(l,S);u((s=s.apply(t,e)).next())});import{useCallback as g,useEffect as E,useRef as I,useState as k}from"react";import{unstable_batchedUpdates as T}from"react-dom";var F=t=>t+1,M=(t,e)=>t!==e;function X({init:t,reducer:e,notEqual:s=M}){let n=new Map,c=new Map,l={_state:t,get state(){return this._state},set state(o){this._state=o,T(()=>{for(let[a,p]of n.entries()){if(!p)continue;let d=c.get(a),f=a(this._state);s(f,d)&&(c.set(a,f),p())}})}};function S(){return l.state}function u(o){return R(this,null,function*(){let a=yield e(o,S,u);l.state=a})}function r(o){n.delete(o),c.delete(o)}function i(o){let a=I(o),p=a.current(l.state),[,d]=k(0),f=g(()=>d(F),[]);return E(()=>()=>r(a.current),[]),n.has(a.current)||(n.set(a.current,f),c.set(a.current,p)),p}return[u,i,S]}var v="__REDUX_DEVTOOLS_EXTENSION__",m=(()=>{try{return window[v]||window.top[v]}catch(t){return}})(),N=0;function q(S){var u=S,{init:t,reducer:e,name:s,replacer:n,reviver:c}=u,l=x(u,["init","reducer","name","replacer","reviver"]);return m?(m.connect({name:s||`ProxyState ${N++}`,serialize:{replacer:n,reviver:c},features:{persist:!1,export:!0,import:"custom",jump:!1,skip:!1,reorder:!1,dispatch:!0,test:!0}}),m.send("__INIT__",t),w({reducer:(i,o,a)=>R(this,null,function*(){let p=new Date().toISOString(),d=e(i,o,a),f=yield d;return d instanceof Promise?m.send(D(w({},i),{__startTime:p,__endTime:new Date().toISOString()}),f):m.send(i,d),d}),init:t},l)):w({reducer:e,init:t},l)}export{q as addDevtools,X as createState};
//# sourceMappingURL=index.esm.js.map
