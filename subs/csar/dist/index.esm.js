var O=Object.defineProperty,x=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var w=(e,s,t)=>s in e?O(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,R=(e,s)=>{for(var t in s||(s={}))v.call(s,t)&&w(e,t,s[t]);if(_)for(var t of _(s))A.call(s,t)&&w(e,t,s[t]);return e},y=(e,s)=>x(e,D(s));var f=(e,s,t)=>new Promise((o,c)=>{var p=r=>{try{i(t.next(r))}catch(n){c(n)}},u=r=>{try{i(t.throw(r))}catch(n){c(n)}},i=r=>r.done?o(r.value):Promise.resolve(r.value).then(p,u);i((t=t.apply(e,s)).next())});import{useCallback as C,useEffect as g,useRef as I,useState as b}from"react";var E=e=>e+1;function V({init:e,reducer:s}){let t=new Map,o=new Map,c={_state:e,get state(){return this._state},set state(n){this._state=n;for(let[a,l]of t.entries()){if(!l)continue;let m=o.get(a),S=a(this._state);S!=m&&(o.set(a,S),l())}}};function p(){return c.state}function u(n){return f(this,null,function*(){let a=yield s(n,p,u);c.state=a})}function i(n){t.delete(n),o.delete(n)}function r(n){let a=I(n),l=a.current(c.state),[,m]=b(0),S=C(()=>m(E),[]);return g(()=>()=>i(a.current),[]),t.has(a.current)||(t.set(a.current,S),o.set(a.current,l)),l}return[u,r,p]}var h="__REDUX_DEVTOOLS_EXTENSION__",d=(()=>{try{return window[h]||window.top[h]}catch(e){return}})(),T=0;function P({init:e,reducer:s,name:t,replacer:o,reviver:c}){return d?(d.connect({name:t||`ProxyState ${T++}`,serialize:{replacer:o,reviver:c},features:{persist:!1,export:!0,import:"custom",jump:!1,skip:!1,reorder:!1,dispatch:!0,test:!0}}),d.send("__INIT__",e),{reducer:(u,i,r)=>f(this,null,function*(){let n=new Date().toISOString(),a=s(u,i,r),l=yield a;return a instanceof Promise?d.send(y(R({},u),{__startTime:n,__endTime:new Date().toISOString()}),l):d.send(u,a),a}),init:e}):{reducer:s,init:e}}export{P as addDevtools,V as createState};
//# sourceMappingURL=index.esm.js.map
